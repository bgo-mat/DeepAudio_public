<!-- Contenu du Tableau -->
<div class="music-card group text-black bg-bgCustom dark:bg-bgCustom-dark border-b border-primary dark:border-primary-dark px-2 py-2 flex flex-col sm:flex-row items-center w-full">
    <!-- Bouton Play/Pause -->
    <div class="w-1/12 flex justify-center sm:justify-start h-[6.125rem] items-center">
        <img (click)="router.navigate(['/pack-detail/'+ sound.pack])" [src]="sound.image || 'assets/houseGenre.png'" alt="Music cover" class="w-14 h-14 rounded-lg object-cover cursor-pointer hover:scale-95 transition-transform duration-200" />

        <div class="flex flex-col">
            <span class="h-6"></span>

            <!-- PAUSE -->
            <svg (click)="togglePlayPause()" *ngIf="isPlaying" xmlns="http://www.w3.org/2000/svg" class="cursor-pointer w-auto h-10 stroke-accent" viewBox="0 0 24 24" fill="none">
                <path d="M8 7h3v10H8zm5 0h3v10h-3z" stroke-width="1"/>
            </svg>

            <!-- PLAY -->
            <svg (click)="togglePlayPause()" *ngIf="!isPlaying" xmlns="http://www.w3.org/2000/svg" class="cursor-pointer w-auto h-10 stroke-text dark:stroke-text-dark group-hover:stroke-accent" viewBox="0 0 24 24" fill="none">
                <path d="M7 6v12l10-6z" stroke-width="1" />
            </svg>
            <span class="h-6"></span>
        </div>
    </div>

    <!-- Section centrale contenant le titre et les tags -->
    <div class="w-6/12 flex flex-col justify-start">
        <!-- Nom du son -->
        <h3 class="text-md h-6 font-semibold text-text dark:text-text-dark truncate">{{ sound.name }}</h3>

        <!-- Forme d'onde -->
        <div #waveform class="w-full"></div>

        <!-- Tags de musique (types et sous-types) -->
        <div class="flex flex-wrap gap-2 h-6 items-end justify-center sm:justify-start">
            <span *ngFor="let type of sound.type_names" class="text-bgCustom duration-200 hover:scale-105 bg-accent-hover pb-0.5 px-1.5 rounded-full cursor-pointer text-xs font-medium transition-transform">
                {{ type }}
            </span>
            <span *ngFor="let subtype of sound.subtype_names" class="text-bgCustom hover:scale-105 bg-accent-hover pb-0.5 px-1.5 rounded-full duration-200 cursor-pointer text-xs font-medium transition-transform">
                {{ subtype }}
            </span>
        </div>
    </div>

    <!-- Section de contrôle (play, like, info) avec une disposition flexible -->
        <!-- Durée -->
        <div class="w-3/12 flex gap-6">
            <span class="w-2/6 text-center text-text dark:text-text-dark ">{{ formatDuration(sound.duration) }}</span>

            <!-- Clé musicale -->
            <span class="w-1/6 text-center text-text dark:text-text-dark ">{{ sound.key }}</span>

            <span class="w-2/6 text-center text-text dark:text-text-dark ">{{ sound.scale }}</span>

            <!-- BPM -->
            <span class="w-1/6 text-center text-text dark:text-text-dark">{{ sound.bpm || '--' }}</span>
        </div>

        <div class="w-2/12 flex items-center justify-center gap-2">

            <!-- Prix et crédits -->
            <div class="flex items-center">
                <span class="text-text dark:text-text-dark">{{ sound.price || '1' }}</span>
                <svg
                        class="w-4 h-4 sm:w-5 sm:h-5 dark:fill-text-dark"
                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 22c3.976 0 8-1.374 8-4V6c0-2.626-4.024-4-8-4S4 3.374 4 6v12c0 2.626 4.024 4 8 4zm0-2c-3.722 0-6-1.295-6-2v-1.268C7.541 17.57 9.777 18 12 18s4.459-.43 6-1.268V18c0 .705-2.278 2-6 2zm0-16c3.722 0 6 1.295 6 2s-2.278 2-6 2-6-1.295-6-2 2.278-2 6-2zM6 8.732C7.541 9.57 9.777 10 12 10s4.459-.43 6-1.268V10c0 .705-2.278 2-6 2s-6-1.295-6-2V8.732zm0 4C7.541 13.57 9.777 14 12 14s4.459-.43 6-1.268V14c0 .705-2.278 2-6 2s-6-1.295-6-2v-1.268z"/>
                </svg>
            </div>

            <!-- Bouton d'ajout -->
            @if(!sound.is_buy){
                <svg (click)="buySong()" class="w-4 h-4 sm:w-5 sm:h-5 cursor-pointer dark:fill-text-dark hover:scale-105 transition-transform duration-200" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 70" enable-background="new 0 0 70 70" xml:space="preserve">
                    <g>
                        <g>
                            <path d="M34.583,7c2.209,0,4,1.773,4,3.962v19.999l20.305,0.038c2.189,0,4.098,1.791,4.098,4c0,2.208-1.976,4-4.164,4
                                l-20.238-0.038v20.076c0,2.188-1.791,3.963-4,3.963s-4-1.774-4-3.963V38.961l-19.77,0.038c-2.188,0-3.828-1.792-3.828-4
                                c0-2.209,1.572-4,3.761-4l19.837-0.038V10.962C30.583,8.773,32.374,7,34.583,7 M34.583,3c-4.411,0-8,3.571-8,7.962v16.007
                                l-15.777,0.03c-4.383,0-7.82,3.589-7.82,8s3.37,8,7.761,8l15.837-0.03v16.068c0,4.391,3.589,7.963,8,7.963s8-3.572,8-7.963V42.969
                                l16.297,0.03c4.398,0,8.105-3.589,8.105-8s-3.773-8-8.164-8l-16.238-0.03V10.962C42.583,6.571,38.994,3,34.583,3L34.583,3z"/>
                        </g>
                        <g>
                            <path d="M35.583,15.136c-0.553,0-1-0.447-1-1v-3c0-0.553,0.447-1,1-1s1,0.447,1,1v3C36.583,14.688,36.136,15.136,35.583,15.136z"
                            />
                        </g>
                        <g>
                            <path d="M35.583,29.136c-0.553,0-1-0.447-1-1v-10c0-0.553,0.447-1,1-1s1,0.447,1,1v10C36.583,28.688,36.136,29.136,35.583,29.136z
                                "/>
                        </g>
                    </g>
                </svg>
            }@else{
                <svg (click)="downloadSong()" id="downloadButton" class="w-4 h-4 sm:w-5 sm:h-5 cursor-pointer dark:fill-text-dark hover:scale-105 transition-transform duration-200" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 70" enable-background="new 0 0 70 70" xml:space="preserve">
                <g>
                    <path d="M47.144,56.686l-9.561,4.35v-24.75c0-1.104-0.896-2-2-2s-2,0.896-2,2v24.381l-8.749-3.98
                        c-1.005-0.457-2.191-0.014-2.648,0.992c-0.458,1.005-0.014,2.191,0.992,2.648l11.839,5.387c0.204,0.109,0.426,0.182,0.653,0.216
                        c0.113,0.021,0.228,0.03,0.342,0.03c0.354,0,0.704-0.096,1.014-0.275L48.8,60.326c1.006-0.457,1.449-1.644,0.992-2.648
                        C49.335,56.671,48.146,56.228,47.144,56.686z"/>
                    <path d="M55.583,23.645v-0.184c0-10.708-8.288-19.42-18.964-19.42c-9.019,0-16.33,6.184-18.401,14.916
                        C9.673,19.83,2.989,26.954,2.989,35.772c0,9.463,7.626,16.811,17,16.811h8.439c1.104,0,2-0.896,2-2s-0.896-2-2-2h-8.439
                        c-7.168,0-13-5.559-13-12.817c0-7.214,5.832-12.736,13-12.736c4.417,0,8.365,2.311,10.831,6.359
                        c0.574,0.942,1.805,1.22,2.749,0.645c0.943-0.575,1.241-1.849,0.667-2.792c-2.754-4.521-7.151-7.52-12.045-8.218
                        c1.931-6.473,7.611-10.982,14.455-10.982c8.613,0,14.938,6.773,14.938,15.42v1.948c0,1.056,0.82,1.93,1.875,1.996
                        c5.543,0.351,9.125,4.467,9.125,10.487v0.352c0,5.486-2.273,10.339-8.236,10.339H42.429c-1.105,0-2,0.896-2,2s0.895,2,2,2h11.918
                        c7.58,0,12.236-5.623,12.236-14.339v-0.352C66.583,30.401,62.583,24.888,55.583,23.645z"/>
                    <path d="M49.052,22.961c0,0.553,0.447,1,1,1s1-0.447,1-1c0-6.647-4.727-12.289-11.236-13.415c-0.541-0.091-1.063,0.271-1.156,0.815
                        c-0.093,0.544,0.271,1.062,0.816,1.155C45.024,12.476,49.052,17.289,49.052,22.961z"/>
                    <path d="M34.792,9.62c-1.068,0.215-2.11,0.56-3.096,1.024c-0.499,0.235-0.713,0.831-0.478,1.331c0.17,0.361,0.53,0.573,0.905,0.573
                        c0.143,0,0.288-0.03,0.426-0.096c0.839-0.396,1.727-0.688,2.637-0.872c0.542-0.109,0.892-0.637,0.783-1.178
                        C35.86,9.862,35.33,9.51,34.792,9.62z"/>
                </g>
                </svg>
            }


            <!-- Bouton Like -->

            <svg (click)="addToFavorite()"
                 [ngClass]="{
                        'fill-text dark:fill-text-dark hover:fill-red-400 dark:hover:fill-red-400': !isActive,
                        'fill-accent': isActive,
                      }"
                 class="w-4 box-border flex items-center justify-center cursor-pointer hover:scale-105 transition-transform ease-in-out h-4 sm:w-5 sm:h-5 duration-200"
                 version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 70" enable-background="new 0 0 70 70" xml:space="preserve">
                <g>
                    <path class="transition-colors ease-in-out duration-200" d="M46.185,5C40.611,5,37.369,7.139,35,10.011C32.631,7.139,29.389,5,23.815,5C12.338,5,3,13.876,3,24.787
                        c0,2.957,0.851,7.335,2.718,9.962c6.147,8.637,25.62,28.241,26.446,29.072C32.915,64.575,33.936,65,35,65s2.084-0.424,2.836-1.179
                        c0.825-0.831,20.299-20.435,26.444-29.07c1.868-2.624,2.72-7.005,2.72-9.964C67,13.876,57.662,5,46.185,5z M61.021,32.432
                        C54.996,40.898,35,61,35,61S15.004,40.898,8.978,32.432C7.69,30.621,7,27.105,7,24.787C7,16.066,14.526,9,23.815,9
                        c6.427,0,8.355,3.388,11.185,8.363C37.829,12.388,39.757,9,46.185,9C55.472,9,63,16.066,63,24.787
                        C63,27.105,62.311,30.621,61.021,32.432z"/>
                    <path class="transition-colors ease-in-out duration-200" d="M50.062,16.177c0.379,0,0.742-0.216,0.91-0.583c0.23-0.502,0.01-1.096-0.492-1.326c-1.813-0.832-3.765-1.253-5.799-1.253
                        c-0.553,0-1,0.448-1,1s0.447,1,1,1c1.744,0,3.415,0.36,4.965,1.071C49.78,16.147,49.923,16.177,50.062,16.177z"/>
                    <path class="transition-colors ease-in-out duration-200" d="M53.632,17.584c-0.42,0.358-0.471,0.989-0.113,1.41c1.604,1.882,2.45,4.149,2.45,6.557c0,1.556-0.481,3.912-1.26,5.006
                        c-1.088,1.527-2.94,3.756-5.507,6.625c-0.368,0.411-0.333,1.044,0.078,1.412c0.191,0.171,0.43,0.255,0.667,0.255
                        c0.274,0,0.548-0.112,0.745-0.333c2.616-2.925,4.516-5.211,5.646-6.799c1.071-1.505,1.631-4.241,1.631-6.166
                        c0-2.848-1.039-5.637-2.927-7.854C54.683,17.276,54.053,17.228,53.632,17.584z"/>
                </g>
            </svg>
        </div>
</div>

